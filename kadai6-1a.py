#------------------------------------------------------------------------------------

# ■使い方
# 1. e-stat APIの利用登録を行い、アプリケーションID (appId) を取得します。
#    https://www.e-stat.go.jp/api/api-info/api-guide
# 2. 取得したい統計データをe-statのサイトで探し、統計表ID (statsDataId) を確認します。
# 3. 必要に応じて、絞り込みたい項目のコード（例: cdCat01）をAPI仕様書やメタ情報取得APIで確認します。
# 4. 以下のコードの APP_ID を使い、必要に応じてパラメータを変更して実行します。
# ------------------------------------------------------------------------------------

# HTTPリクエストを送信するためのライブラリをインポート
import requests

# e-stat API利用のために登録・取得したアプリケーションID
APP_ID = "104b1c9ba59cdf32fbe476a19756dffd11941c85"

# ------------------------------------------------------------------------------------
# ■APIエンドポイントと機能
# エンドポイント: https://api.e-stat.go.jp/rest/3.0/app/json/getStatsData
# 機能: 指定した統計表ID (statsDataId) に対応する統計データをJSON形式で取得します。
#       さらに、絞り込み条件（cdCat01など）を指定することで、特定のデータのみを抽出できます。
# ------------------------------------------------------------------------------------
API_URL  = "https://api.e-stat.go.jp/rest/3.0/app/json/getStatsData?"

# APIリクエストに含めるパラメータを設定
params = {
    # アプリケーションIDを指定
    "appId": APP_ID,

    # ------------------------------------------------------------------------------------
    # ■取得するデータの種類
    # statsDataId: 0003290948
    # 統計調査名: 研究主体、組織別内部使用研究費、受入研究費及び外部支出研究費
    # ------------------------------------------------------------------------------------
    "statsDataId":"0003290948",

    # ------------------------------------------------------------------------------------
    # ■絞り込み条件
    # cdCat01: 分類事項コード1
    # この統計表(0003290948)において、分類事項(cat01)は「研究費目」を表します。
    # ------------------------------------------------------------------------------------
    "cdCat01":"00150",

    # 取得するデータの言語を指定 (J:日本語, E:英語)
    "lang": "J"
}

# 設定したURLとパラメータでe-stat APIにGETリクエストを送信し、レスポンスを取得
response = requests.get(API_URL, params=params)

# レスポンスのボディをJSON形式からPythonのオブジェクトに変換
data = response.json()

# 取得・変換したデータを出力
print(data)
